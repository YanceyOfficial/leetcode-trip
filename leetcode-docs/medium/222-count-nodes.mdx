---
id: 222-count-nodes
title: å®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°
sidebar_label: 222. å®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°
keywords:
  - Tree
---

:::success Tips
é¢˜ç›®ç±»å‹: Tree
:::

## é¢˜ç›®

ç»™ä½ ä¸€æ£µ**å®Œå…¨äºŒå‰æ ‘**çš„æ ¹èŠ‚ç‚¹ root, æ±‚å‡ºè¯¥æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°.

**å®Œå…¨äºŒå‰æ ‘**çš„å®šä¹‰å¦‚ä¸‹: åœ¨å®Œå…¨äºŒå‰æ ‘ä¸­, é™¤äº†æœ€åº•å±‚èŠ‚ç‚¹å¯èƒ½æ²¡å¡«æ»¡å¤–, å…¶ä½™æ¯å±‚èŠ‚ç‚¹æ•°éƒ½è¾¾åˆ°æœ€å¤§å€¼, å¹¶ä¸”æœ€ä¸‹é¢ä¸€å±‚çš„èŠ‚ç‚¹éƒ½é›†ä¸­åœ¨è¯¥å±‚**æœ€å·¦è¾¹**çš„è‹¥å¹²ä½ç½®. è‹¥æœ€åº•å±‚ä¸ºç¬¬ h å±‚, åˆ™è¯¥å±‚åŒ…å« `1 ~ 2h` ä¸ªèŠ‚ç‚¹.

:::info ç¤ºä¾‹

è¾“å…¥:

```ts
      1
    /  \
   2    3
 /  \   /
4   5  6
```

è¾“å‡º: 6
:::

## é¢˜è§£

import Tabs from '@theme/Tabs'
import TabItem from '@theme/TabItem'

<Tabs>
  <TabItem value="æš´åŠ›é€’å½’" label="æš´åŠ›é€’å½’">

æœ€æš´åŠ›çš„å°±å†™ä¸ªé€’å½’, è¿™ä¸ªæ–¹æ³•ä¸ç®¡ä½ æ˜¯ä»€ä¹ˆäºŒå‰æ ‘, ä¸€æŠŠæ¢­, æŠŠæ‰€æœ‰èŠ‚ç‚¹æ’¸ä¸€é, è¿”å›æ€»é•¿åº¦å³å¯.

```ts
var countNodes = function (root) {
  return root !== null ? 1 + countNodes(root.left) + countNodes(root.right) : 0
}
```

</TabItem>
<TabItem value="æœ€ä¼˜è§£æ³•" label="æœ€ä¼˜è§£æ³•" default>

å½“ç„¶äººå®¶éƒ½è¯´äº†æ˜¯ä¸ªå®Œå…¨äºŒå‰æ ‘, ä¸ç„¶åªç”¨æš´åŠ›æ³•å°± too young, too simple, sometimes naive äº† ğŸ¸.
ç¨å¾®å¤ä¹ ä¸‹, å®Œç¾äºŒå‰æ ‘ä¸€å®šæ˜¯å®Œå…¨äºŒå‰æ ‘, ä½†å®Œå…¨äºŒå‰æ ‘ä¸ä¸€å®šæ˜¯å®Œç¾äºŒå‰æ ‘, è€Œå®Œç¾äºŒå‰æ ‘å¯ä»¥ç”¨ **2<sup>n</sup> - 1** ç›´æ¥ç®—å‡ºæ€»é•¿åº¦.
å› æ­¤æˆ‘ä»¬å¯ä»¥å…ˆåˆ¤æ–­æ˜¯å¦ä¸ºå®Œç¾äºŒå‰æ ‘, å³**å¦‚æœæœ€å·¦çº¿çš„é«˜åº¦ç­‰äºæœ€å³çº¿çš„é«˜åº¦, è¯æ˜æ˜¯é¢—å®Œç¾äºŒå‰æ ‘.**, å¦åˆ™è€è€å®å®çš„èµ°é€’å½’è®¡ç®—æ€»é•¿åº¦.

```ts
/**
 * Definition for a binary tree node.
 * function TreeNode(val, left, right) {
 *     this.val = (val===undefined ? 0 : val)
 *     this.left = (left===undefined ? null : left)
 *     this.right = (right===undefined ? null : right)
 * }
 */
/**
 * @param {TreeNode} root
 * @return {number}
 */
var countNodes = function (root) {
  let hLeft = 0,
    hRight = 0
  let pLeft = root,
    pRight = root

  while (pLeft) {
    ++hLeft
    pLeft = pLeft.left
  }
  while (pRight) {
    ++hRight
    pRight = pRight.right
  }

  // å¦‚æœæœ€å·¦çº¿çš„é«˜åº¦ç­‰äºæœ€å³çº¿çš„é«˜åº¦, è¯æ˜æ˜¯é¢—å®Œç¾äºŒå‰æ ‘, ç›´æ¥ 2^n - 1 è¿”å›å®Œæ´»
  if (hLeft === hRight) return Math.pow(2, hLeft) - 1

  // å¦åˆ™è¿˜æ˜¯èµ°é€’å½’é‚£å¥—
  return countNodes(root.left) + countNodes(root.right) + 1
}
```

</TabItem>
</Tabs>

## å¤ä¹ å„ç§äºŒå‰æ ‘

import useBaseUrl from '@docusaurus/useBaseUrl'

<img
  style={{
    display: 'block',
    margin: '24px auto',
    textAlgin: 'center',
    background: '#fff',
  }}
  src={useBaseUrl('/img/222-count-nodes.png')}
  alt='222-count-nodes'
/>

| ä¸­æ–‡å     | è‹±æ–‡å                    | è§£é‡Š                                                                                                                                                                                      |
| ---------- | ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| å®Œç¾äºŒå‰æ ‘ | Perfect Binary Tree       | Every node except the leaf nodes have two children and every level (last level too) is completely filled. é™¤äº†å¶å­ç»“ç‚¹ä¹‹å¤–çš„æ¯ä¸€ä¸ªç»“ç‚¹éƒ½æœ‰ä¸¤ä¸ªå­©å­, æ¯ä¸€å±‚(å½“ç„¶åŒ…å«æœ€åä¸€å±‚)éƒ½è¢«å®Œå…¨å¡«å……. |
| å®Œå…¨äºŒå‰æ ‘ | Complete Binary Tree      | Every level except the last level is completely filled and all the nodes are left justified. é™¤äº†æœ€åä¸€å±‚ä¹‹å¤–çš„å…¶ä»–æ¯ä¸€å±‚éƒ½è¢«å®Œå…¨å¡«å……, å¹¶ä¸”æ‰€æœ‰ç»“ç‚¹éƒ½ä¿æŒå‘å·¦å¯¹é½.                        |
| å®Œæ»¡äºŒå‰æ ‘ | Full/Strictly Binary Tree | Every node except the leaf nodes have two children. é™¤äº†å¶å­ç»“ç‚¹ä¹‹å¤–çš„æ¯ä¸€ä¸ªç»“ç‚¹éƒ½æœ‰ä¸¤ä¸ªå­©å­ç»“ç‚¹.                                                                                         |

- å®Œç¾(Perfect)äºŒå‰æ ‘ä¸€å®šæ˜¯å®Œå…¨(Complete)äºŒå‰æ ‘, ä½†å®Œå…¨(Complete)äºŒå‰æ ‘ä¸ä¸€å®šæ˜¯å®Œç¾(Perfect)äºŒå‰æ ‘.
- å®Œç¾(Perfect)äºŒå‰æ ‘ä¸€å®šæ˜¯å®Œæ»¡(Full)äºŒå‰æ ‘, ä½†å®Œæ»¡(Full)äºŒå‰æ ‘ä¸ä¸€å®šæ˜¯å®Œç¾(Perfect)äºŒå‰æ ‘.
- å®Œå…¨(Complete)äºŒå‰æ ‘å¯èƒ½æ˜¯å®Œæ»¡(Full)äºŒå‰æ ‘, å®Œæ»¡(Full)äºŒå‰æ ‘ä¹Ÿå¯èƒ½æ˜¯å®Œå…¨(Complete)äºŒå‰æ ‘.
- æ—¢æ˜¯å®Œå…¨(Complete)äºŒå‰æ ‘åˆæ˜¯å®Œæ»¡(Full)äºŒå‰æ ‘ä¹Ÿä¸ä¸€å®šå°±æ˜¯å®Œç¾(Perfect)äºŒå‰æ ‘.
